# Rime schema
# encoding: utf-8

schema:
  schema_id: triple_pinyin_lishi26
  name: å»¿å…­ä¸‰æ‹¼
  version: "3.5"
  author:
    - ä½›æŒ¯ <chen.sst@gmail.com>
    - é˜¿æ£®ç´è£¡ <15678407@qq.com>
  description: |
    26éµå…§å¯¦ç¾ä¸‰ç¢¼è¼¸å…¥ä¸€å€‹å¸¶èª¿éŸ³ç¯€ï¼›
    å‰å…©ç¢¼ç‚ºé›™æ‹¼ï¼Œç¬¬ä¸‰ç¢¼ä»¥oewayè¼¸å…¥äº”è²èª¿ï¼Œè²èª¿å¯çœç•¥ï¼›
    é›™æ‹¼æ–¹æ¡ˆåŸºæ–¼è‡ªç„¶ç¢¼ï¼Œy,w,é›¶è²æ¯åˆ†åˆ¥ä»¥j/f,q,xè¼¸å…¥ï¼›
    å¯ç”¨HSPNZï¼ˆæ©«è±æ’‡æºæŠ˜ï¼‰é€£çºŒè¼¸å…¥ç­†ç•«è¼”åŠ©ç¢¼é€²è¡Œé€å­—ç¯©é¸ï¼›
    ä¸Šå±ç¢¼å’Œæç¤ºç¢¼æœ‰å…¨æ‹¼ï¼ˆç„¡èª¿æ‹¼éŸ³ï¼‰ã€å¸¶èª¿æ‹¼éŸ³ã€æ³¨éŸ³ç¬¦è™Ÿå’Œåœ‹èªç¾…é¦¬å­—å››ç¨®å½¢å¼ï¼Œå¯ä»»æ„åˆ‡æ›ã€‚
  dependencies:
    - luna_pinyin
    - stroke

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è‹±æ–‡ ]
    
  - name: simplification
    states: [ ç¹é«”, ç®€ä½“ ]
    
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
    
  - options: [ lishi26_quanpin, lishi26_ddpy, lishi26_zhuyin, lishi26_guoluo, lishi26_translator ]
    states: [ å…¨æ‹¼, æ‹¼éŸ³, æ³¨éŸ³, å›½ç½—, åŸç  ]
    
  - name: small_mode
    states: [ åŒæ‰‹, å•æ‰‹ ]
    
  - name: ascii_punct
    states: [ ï¼Œã€‚, ï¼Œï¼ ]
    
  - options: [ VOICE_ASSIST ]
    states: [ "ğŸ™" ]
    
  - options: [ _Keyboard_emoji ]
    states: [ "ğŸ˜Š" ]
    
  - options: [ _Keyboard_symbols ]
    states: [ "ğŸ”£" ]
    
  - options: [ _Keyboard_clip ]
    states: [ "ğŸ“‹" ]
    
  # - options: [ Keyboard_ls26, Keyboard_ls26zy ]
    # states: [ âŒ¨æ‹¼éŸ³, âŒ¨æ³¨éŸ³ ]
    
  - options: [ Menu ]
    states: [ "æ–¹æ¡ˆ" ]
    
  - options: [ Theme_settings ]
    states: [ "ä¸»é¢˜" ]
    
  - options: [ Color_switch ]
    states: [ "é…è‰²" ]
    
  - options: [ Hint_switch ]
    states: [ "åŠ©è®°" ]
    
  - options: [ IME_switch ]
    states: [ "ğŸŒ" ]

engine:
  processors:
    - lua_processor@*limited
    - lua_processor@*lssp_processor
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor  # ç·¨è¼¯å™¨
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - echo_translator  # æ²’æœ‰å…¶ä»–çµæœæ™‚ï¼Œå‰µå»ºä¸€å€‹èˆ‡ç·¨ç¢¼ä¸²ä¸€æ¨£çš„å€™é¸é …
    - punct_translator
    - reverse_lookup_translator@luna_pinyin_lookup
    - reverse_lookup_translator@stroke_lookup
    - lua_translator@*triple_pinyin_lishi26
    - script_translator
  filters:
    - simplifier
    - lua_filter@*aux_code_stroke
    - uniquifier

speller:             # æ‹¼å¯«è™•ç†å™¨ï¼šè©å…¸ç·¨ç¢¼->è¼¸å…¥ç¢¼
  alphabet: 'zyxwvutsrqponmlkjihgfedcbaHSPNZ'
  initials: 'zxvutsrqpnmlkjihgfdcb'
  delimiter: " ;'"
  # auto_clear: auto # manual|auto|max_length ç©ºç¢¼æŒ‰ä¸‹ä¸€éµç¢ºèªæ¸…å±|ç©ºç¢¼è‡ªå‹•æ¸…å±|é”åˆ°æœ€é•·ç¢¼æ™‚å¾Œç¢¼é ‚ä¸Šæ¸…å±
  algebra:                             # è©å…¸ç·¨ç¢¼->è¼¸å…¥ç¢¼
   # è¬è±¡è©åº«è™•ç†
    - xform/^([a-zÄÅÄ“Ä«Å«Ç–Ã¡Ã³Ã©Ã­ÃºÇ˜ÇÇ’Ä›ÇÇ”ÇšÃ Ã²Ã¨Ã¬Ã¹Çœ]+);[;,a-z]+$/$1/        # åˆªé™¤è¼”åŠ©ç¢¼
    - xform/Ä(\w*)/a$1\x31/
    - xform/Å(\w*)/o$1\x31/
    - xform/Ä“(\w*)/e$1\x31/
    - xform/Ä«(\w*)/i$1\x31/
    - xform/Å«(\w*)/u$1\x31/
    - xform/Ç–(\w*)/v$1\x31/
    - xform/Ã¡(\w*)/a$1\x32/
    - xform/Ã³(\w*)/o$1\x32/
    - xform/Ã©(\w*)/e$1\x32/
    - xform/Ã­(\w*)/i$1\x32/
    - xform/Ãº(\w*)/u$1\x32/
    - xform/Ç˜(\w*)/v$1\x32/
    - xform/Ç(\w*)/a$1\x33/
    - xform/Ç’(\w*)/o$1\x33/
    - xform/Ä›(\w*)/e$1\x33/
    - xform/Ç(\w*)/i$1\x33/
    - xform/Ç”(\w*)/u$1\x33/
    - xform/Çš(\w*)/v$1\x33/
    - xform/Ã (\w*)/a$1\x34/
    - xform/Ã²(\w*)/o$1\x34/
    - xform/Ã¨(\w*)/e$1\x34/
    - xform/Ã¬(\w*)/i$1\x34/
    - xform/Ã¹(\w*)/u$1\x34/
    - xform/Çœ(\w*)/v$1\x34/
    - xform/^([a-z]+)$/$1\x35/      # æœªæ¨™èª¿éŸ³ç¯€çµ±ä¸€è½‰æ›ç‚ºè¼•è²
   # 1  éŸ³ç¯€ä¿®æ­£åˆä½µ
    - erase/^xx$/
    - xform/^m([1-5])$/mu$1/        # é¼»éŸ³mï¼ˆå‘£ï¼‰è½‰åŒ–çˆ²mu
    - xform/^r5$/er5/               # r5ï¼ˆå…’ï¼‰è½‰åŒ–çˆ²er5
    - xform/^eh([1-5])$/e$1/        # æ¨¡ç³ŠéŸ³ï¼šehï¼ˆèª’æ¬¸ï¼‰ã€eåˆä½µ
   # 2  æ‹¼éŸ³å®Œæ•´å½¢å¼
    - xform/^([jqxy])u/$1v/
   # 3  ç•°æ‹¼
    - derive/([jx])v([1-5])$/$1u$2/
    - erase/[bpm]?i?ong[1-5]$/
    - erase/f(e|ong|iao|u[a-z]+)[1-5]$/
    - erase/[dt](o|i[ao]ng|va?n|ve?)[1-5]$|[nl](ui|iong)[1-5]$|[gkh]o[1-5]$/
   # 4  å°–éŸ³è™•ç†
    - xform/^zii([1-5])$/gi$1/
    - xform/^z(?!ve)(v[a-z]*|iong)([1-5])$/b$1$2/
    - derive/^z(ve[1-5])$/b$1/
    - xform/^cii([1-5])$/ki$1/
    - xform/^c(?!ve)(v[a-z]*|iong)([1-5])$/p$1$2/
    - derive/^c(ve[1-5])$/p$1/
    - xform/^sii([1-5])$/hi$1/
    - xform/^s(?!ve)(v[a-z]*|iong)([1-5])$/m$1$2/
    - derive/^s(ve[1-5])$/m$1/
   # 5  éŸ³ç¯€åˆä½µ
    - xform/^er([1-5])$/fe$1/
    - derive/^y([ae])(?!i)/fi$1/
    - derive/^you/fiu/
    - derive/^yin/yen/
    - xform/^y([iv]\w*|ong)([1-5])$/f$1$2/
    - xform/^y/j/
    - xform/^w/q/
    - xform/^([aoe]\w*)/x$1/
    
   # 6  é›™æ‹¼è™•ç†
    - xform/iu([1-5])$/Q$1/
    - xform/ia(?=[1-5]$)|(?<=[gkhr])ua(?=[1-5]$)/W/
    - xform/[uv]an([1-5])$/R$1/
    - xform/ve([1-5])$/T$1/
    - xform/ing(?=[1-5]$)|(?<=[gkhr])uai(?=[1-5]$)/Y/
    - xform/uo([1-5])$/O$1/
    - xform/[uv]n([1-5])$/P$1/
    - xform/i?ong([1-5])$/S$1/
    - xform/iang(?=[1-5]$)|(?<=[dtgkhr])uang(?=[1-5]$)/D/
    - xform/en([1-5])$/F$1/
    - xform/eng([1-5])$/G$1/
    - xform/ang([1-5])$/H$1/
    - xform/(?<!i)an([1-5])$/J$1/
    - xform/(?<!i)ao([1-5])$/K$1/
    - xform/ai([1-5])$/L$1/
    - xform/ei([1-5])$/Z$1/
    - xform/ie([1-5])$/X$1/
    - xform/iao([1-5])$/C$1/
    - xform/ui([1-5])$/V$1/
    - xform/ou([1-5])$/B$1/
    - xform/in([1-5])$/N$1/
    - xform/ian([1-5])$/M$1/
    - xform/^zh/V/
    - xform/^ch/I/
    - xform/^sh/U/
    
    - erase/^([A-Za-z]|[A-Za-z]{3,})([1-5])$/
    - xlit/QWERTYUIOPASDFGHJKLZXCVBNM/qwertyuiopasdfghjklzxcvbnm/
    - erase/^[oeway]\w*/
    
   # 7  ç°¡æ‹¼
    - derive/^([a-z])([a-z])([1-5])$/$1$2/                  # ç„¡è²èª¿
    - abbrev/^([a-z])([a-z])([1-5])$/$1/                    # è²æ¯
    # - abbrev/^([a-z])([a-z])([1-5])$/$1$3/                  # è²æ¯+è²èª¿
    # - abbrev/^([a-z])([a-z])([1-5])$/$1$3$2/                # è²æ¯+è²èª¿+éŸ»æ¯
    
   # 8  è®Šå½¢
    - xlit/12345/oeway/

quanpin:             # è¼¸å…¥ç¿»è­¯å™¨ï¼šè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šæ¼¢èªæ‹¼éŸ³å…¨æ‹¼
  dictionary: terra_pinyin.extended
  prism: triple_pinyin_lishi26
  spelling_hints: 5 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´æç¤ºç¢¼
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  preedit_format:                      # è¼¸å…¥ç¢¼->ä¸Šå±ç¢¼
   __patch: &translator_preedit            # ç¬¬1æ­¥ï¼šè¼¸å…¥ç¢¼->è©å…¸ç·¨ç¢¼
    __append:
   # 1.1  è®Šå½¢
    - xform/\<([a-z]{2})o/$1\x31/                           # é€£çºŒ3ç¢¼ä¸­çš„ç¬¬3ç¢¼oewayä½œ12345è²
    - xform/\<([a-z]{2})e/$1\x32/
    - xform/\<([a-z]{2})w/$1\x33/
    - xform/\<([a-z]{2})a/$1\x34/
    - xform/\<([a-z]{2})y/$1\x35/
    
   # 1.2  é›™æ‹¼è™•ç†
    - xform/\<([^oeway])q/$1Iu/
    - xform/\<([bpmfdtnljqxzcs])w/$1Ia/
    - xform/\<([gkhviur])w/$1Ua/
    - xform/\<([bpmfjqx])r/$1Van/
    - xform/\<([dtnlgkhviurzcs])r/$1Uan/
    - xform/\<([bpmfnljqxzcs])t/$1Ve/
    - xform/\<([dtgkhviur])t/$1Ue/
    - xform/\<([bpmfdtnljqxzcs])y/$1Ing/
    - xform/\<([gkhviur])y/$1Uai/
    - xform/\<([dtnlgkhviurzcs])o/$1Uo/
    - xform/\<([bpmfjqx])p/$1Vn/
    - xform/\<([dtnlgkhviurzcs])p/$1Un/
    - xform/\<([bpmfjqx])s/$1Iong/
    - xform/\<([dtnlgkhviurzcs])s/$1Ong/
    - xform/\<([bpmfnljqxzcs])d/$1Iang/
    - xform/\<([dtgkhviur])d/$1Uang/
    - xform/\<([^oeway])f/$1En/
    - xform/\<([^oeway])g/$1Eng/
    - xform/\<([^oeway])h/$1Ang/
    - xform/\<([^oeway])j/$1An/
    - xform/\<([^oeway])k/$1Ao/
    - xform/\<([^oeway])l/$1Ai/
    - xform/\<([^oeway])z/$1Ei/
    - xform/\<([^oeway])x/$1Ie/
    - xform/\<([^oeway])c/$1Iao/
    - xform/\<([dtgkhviurzcs])v/$1Ui/
    - xform/\<([^oeway])b/$1Ou/
    - xform/\<([^oeway])n/$1In/
    - xform/\<([^oeway])m/$1Ian/
    - xform/\<v/Zh/
    - xform/\<i/Ch/
    - xform/\<u/Sh/
    
   # 1.3  éŸ³ç¯€åˆä½µ
    - xform/\<fe/er/
    - xform/\<fIu/you/
    - xform/\<f([iv]|[IV]\w+)/Y$1/
    - xform/\<YI([aoe]\w*)/y$1/
    - xform/\<jEn/yin/
    - xform/\<j([aoe]|[AOE]\w+)/Y$1/
    - xform/\<q([aoeu]|[AOE]\w+)/W$1/
    - xform/\<x([aoe]|[AOE]\w+)/$1/
   # 1.4  å°–éŸ³è™•ç†
    - xform/\<gi([1-5])?\>/Zii$1/
    - xform/\<b(v|V[a-z]+|Iong)([1-5])?\>/Z$1$2/
    - xform/\<ki([1-5])?\>/Cii$1/
    - xform/\<p(v|V[a-z]+|Iong)([1-5])?\>/C$1$2/
    - xform/\<hi([1-5])?\>/Sii$1/
    - xform/\<m(v|V[a-z]+|Iong)([1-5])?\>/S$1$2/
   # 1.5  ç•°æ‹¼
    - xform/\<([jx])u/$1v/
   # 1.6  æ‹¼éŸ³å®Œæ•´å½¢å¼
    - xlit/QWERTYUIOPASDFGHJKLZXCVBNM/qwertyuiopasdfghjklzxcvbnm/
    - xform/\<([jqxy])v/$1u/
    
   # 1.7  ç°¡æ‹¼è™•ç†
    - xform/f(?!\w)/f\x2Fy/                                 # é¦–ç¢¼ç°¡æ‹¼
    - xform/j(?!\w)/j\x2Fy/
    - xform/q(?!\w)/q\x2Fw/
    - xform/x(?!\w)/Â´\x2Fx/
   __patch:                                # ç¬¬2æ­¥ï¼šè©å…¸ç·¨ç¢¼->ä¸Šå±ç¢¼
    __append: {__include: triple_pinyin:/translator/preedit_format_2_pinyin_to_quanpin}  # æ¼¢èªæ‹¼éŸ³å…¨æ‹¼(quanpin) / å¸¶èª¿æ‹¼éŸ³(ddpy) / æ³¨éŸ³ç¬¦è™Ÿ(zhuyin) / åœ‹èªç¾…é¦¬å­—(guoluo)
  comment_format: &translator_comment  # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼
   __patch:                                # è¬è±¡è©åº«è™•ç†
    __append:
    - xform/\<([a-zÄÅÄ“Ä«Å«Ç–Ã¡Ã³Ã©Ã­ÃºÇ˜ÇÇ’Ä›ÇÇ”ÇšÃ Ã²Ã¨Ã¬Ã¹Çœ]+);[;,a-z]+\>/$1/        # åˆªé™¤è¼”åŠ©ç¢¼
    - xform/Ä(\w*)/a$1\x31/
    - xform/Å(\w*)/o$1\x31/
    - xform/Ä“(\w*)/e$1\x31/
    - xform/Ä«(\w*)/i$1\x31/
    - xform/Å«(\w*)/u$1\x31/
    - xform/Ç–(\w*)/v$1\x31/
    - xform/Ã¡(\w*)/a$1\x32/
    - xform/Ã³(\w*)/o$1\x32/
    - xform/Ã©(\w*)/e$1\x32/
    - xform/Ã­(\w*)/i$1\x32/
    - xform/Ãº(\w*)/u$1\x32/
    - xform/Ç˜(\w*)/v$1\x32/
    - xform/Ç(\w*)/a$1\x33/
    - xform/Ç’(\w*)/o$1\x33/
    - xform/Ä›(\w*)/e$1\x33/
    - xform/Ç(\w*)/i$1\x33/
    - xform/Ç”(\w*)/u$1\x33/
    - xform/Çš(\w*)/v$1\x33/
    - xform/Ã (\w*)/a$1\x34/
    - xform/Ã²(\w*)/o$1\x34/
    - xform/Ã¨(\w*)/e$1\x34/
    - xform/Ã¬(\w*)/i$1\x34/
    - xform/Ã¹(\w*)/u$1\x34/
    - xform/Çœ(\w*)/v$1\x34/
    - xform/\<([a-z]+)\>/$1\x30/      # æœªæ¨™èª¿éŸ³ç¯€è²èª¿æ¨™è¨˜ç‚º0ï¼Œç›®å‰å…¨æ‹¼å¯«æ³•å’Œè¼•è²ç›¸åŒï¼Œå¸¶èª¿æ‹¼éŸ³å¯«æ³•å’Œè¼•è²ç›¸åŒï¼Œæ³¨éŸ³ç¬¦è™Ÿå¯«æ³•å’Œè¼•è²ä¸åŒï¼Œæœªæ¨™èª¿éŸ³ç¯€ä¸æ¨™èª¿ï¼Œä½†èˆ‡å¾Œä¸€å€‹éŸ³ç¯€ä¹‹é–“ç”¨'éš”é–‹ï¼Œåœ‹èªç¾…é¦¬å­—æŠŠémnlré–‹é ­çš„æœªæ¨™èª¿éŸ³ç¯€è½‰æ›ç‚º1è²ï¼Œmnlré–‹é ­çš„æœªæ¨™èª¿éŸ³ç¯€è½‰æ›ç‚º2è²
   # __patch:                                # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼ï¼šåˆ†å…©æ®µ1
    # __append: {__include: triple_pinyin:/translator/comment_format_copy1}
   # __patch:                                # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼ï¼šåˆ†å…©æ®µ2
     # __append:
      # __include: triple_pinyin_lishi26.schema:/luna_pinyin_lookup/comment_format?  # è¼¸å…¥ç¢¼ï¼ˆæ–¹æ¡ˆç·¨ç¢¼ï¼‰ï¼šææ°ä¸‰æ‹¼(lssp) / ææ°ä¸‰æ‹¼aeo(lsspaeo) / ææ°æ³¨éŸ³(bopomofo) / å»¿å…­ä¸‰æ‹¼(lishi26)
      # __append: {__include: triple_pinyin:/translator/comment_format_copy2}
   __patch:                                # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼ï¼šåˆ†å…©æ®µ3
      __append:
       __include: triple_pinyin:/translator/comment_format_pinyin_to_guoluo  # æ¼¢èªæ‹¼éŸ³å…¨æ‹¼(quanpin) / å¸¶èª¿æ‹¼éŸ³(ddpy) / æ³¨éŸ³ç¬¦è™Ÿ(zhuyin) / åœ‹èªç¾…é¦¬å­—(guoluo)
       __append: {__include: triple_pinyin:/translator/comment_format_copy3}

ddpy:                # è¼¸å…¥ç¿»è­¯å™¨ï¼šè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šå¸¶èª¿æ‹¼éŸ³
  dictionary: terra_pinyin.extended
  prism: triple_pinyin_lishi26
  spelling_hints: 5 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´æç¤ºç¢¼
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  preedit_format:                      # è¼¸å…¥ç¢¼->ä¸Šå±ç¢¼
   __patch: *translator_preedit            # ç¬¬1æ­¥ï¼šè¼¸å…¥ç¢¼->è©å…¸ç·¨ç¢¼
   __patch:                                # ç¬¬2æ­¥ï¼šè©å…¸ç·¨ç¢¼->ä¸Šå±ç¢¼
    __append: {__include: triple_pinyin:/translator/preedit_format_2_pinyin_to_ddpy}  # æ¼¢èªæ‹¼éŸ³å…¨æ‹¼(quanpin) / å¸¶èª¿æ‹¼éŸ³(ddpy) / æ³¨éŸ³ç¬¦è™Ÿ(zhuyin) / åœ‹èªç¾…é¦¬å­—(guoluo)
  comment_format: *translator_comment  # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼

zhuyin:              # è¼¸å…¥ç¿»è­¯å™¨ï¼šè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šæ³¨éŸ³ç¬¦è™Ÿ
  dictionary: terra_pinyin.extended
  prism: triple_pinyin_lishi26
  spelling_hints: 5 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´æç¤ºç¢¼
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  preedit_format:                      # è¼¸å…¥ç¢¼->ä¸Šå±ç¢¼
   __patch: *translator_preedit            # ç¬¬1æ­¥ï¼šè¼¸å…¥ç¢¼->è©å…¸ç·¨ç¢¼
   __patch:                                # ç¬¬2æ­¥ï¼šè©å…¸ç·¨ç¢¼->ä¸Šå±ç¢¼
    __append: {__include: triple_pinyin:/translator/preedit_format_2_pinyin_to_zhuyin}  # æ¼¢èªæ‹¼éŸ³å…¨æ‹¼(quanpin) / å¸¶èª¿æ‹¼éŸ³(ddpy) / æ³¨éŸ³ç¬¦è™Ÿ(zhuyin) / åœ‹èªç¾…é¦¬å­—(guoluo)
  comment_format: *translator_comment  # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼

guoluo:              # è¼¸å…¥ç¿»è­¯å™¨ï¼šè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šåœ‹èªç¾…é¦¬å­—
  dictionary: terra_pinyin.extended
  prism: triple_pinyin_lishi26
  spelling_hints: 5 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´æç¤ºç¢¼
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  preedit_format:                      # è¼¸å…¥ç¢¼->ä¸Šå±ç¢¼
   __patch: *translator_preedit            # ç¬¬1æ­¥ï¼šè¼¸å…¥ç¢¼->è©å…¸ç·¨ç¢¼
   __patch:                                # ç¬¬2æ­¥ï¼šè©å…¸ç·¨ç¢¼->ä¸Šå±ç¢¼
    __append: {__include: triple_pinyin:/translator/preedit_format_2_pinyin_to_guoluo}  # æ¼¢èªæ‹¼éŸ³å…¨æ‹¼(quanpin) / å¸¶èª¿æ‹¼éŸ³(ddpy) / æ³¨éŸ³ç¬¦è™Ÿ(zhuyin) / åœ‹èªç¾…é¦¬å­—(guoluo)
  comment_format: *translator_comment  # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼

translator:          # ä¸»ç¿»è­¯å™¨ï¼Œä¸è½‰æ›è¼¸å…¥ç¢¼
  dictionary: terra_pinyin.extended
  prism: triple_pinyin_lishi26
  spelling_hints: 5 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´æç¤ºç¢¼
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  comment_format: *translator_comment  # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼

luna_pinyin_lookup:  # æ‹¼éŸ³åæŸ¥
  tag: luna_pinyin_lookup
  dictionary: luna_pinyin
  enable_completion: true
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  prefix: "`"
  suffix: "'"
  tips: ã€”æ‹¼éŸ³åæŸ¥ã€•
  preedit_format:  #  åæŸ¥æ–¹æ¡ˆè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šæ¼¢èªæ‹¼éŸ³å…¨æ‹¼
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/
  comment_format: &reverse_lookup_comment  # æœ¬æ–¹æ¡ˆè©å…¸ç·¨ç¢¼->æç¤ºç¢¼ï¼šæœ¬æ–¹æ¡ˆè¼¸å…¥ç¢¼
   # è¬è±¡è©åº«è™•ç†
    - xform/\<([a-zÄÅÄ“Ä«Å«Ç–Ã¡Ã³Ã©Ã­ÃºÇ˜ÇÇ’Ä›ÇÇ”ÇšÃ Ã²Ã¨Ã¬Ã¹Çœ]+);[;,a-z]+\>/$1/        # åˆªé™¤è¼”åŠ©ç¢¼
    - xform/Ä(\w*)/a$1\x31/
    - xform/Å(\w*)/o$1\x31/
    - xform/Ä“(\w*)/e$1\x31/
    - xform/Ä«(\w*)/i$1\x31/
    - xform/Å«(\w*)/u$1\x31/
    - xform/Ç–(\w*)/v$1\x31/
    - xform/Ã¡(\w*)/a$1\x32/
    - xform/Ã³(\w*)/o$1\x32/
    - xform/Ã©(\w*)/e$1\x32/
    - xform/Ã­(\w*)/i$1\x32/
    - xform/Ãº(\w*)/u$1\x32/
    - xform/Ç˜(\w*)/v$1\x32/
    - xform/Ç(\w*)/a$1\x33/
    - xform/Ç’(\w*)/o$1\x33/
    - xform/Ä›(\w*)/e$1\x33/
    - xform/Ç(\w*)/i$1\x33/
    - xform/Ç”(\w*)/u$1\x33/
    - xform/Çš(\w*)/v$1\x33/
    - xform/Ã (\w*)/a$1\x34/
    - xform/Ã²(\w*)/o$1\x34/
    - xform/Ã¨(\w*)/e$1\x34/
    - xform/Ã¬(\w*)/i$1\x34/
    - xform/Ã¹(\w*)/u$1\x34/
    - xform/Çœ(\w*)/v$1\x34/
    - xform/\<([a-z]+)\>/$1\x35/      # æœªæ¨™èª¿éŸ³ç¯€çµ±ä¸€è½‰æ›ç‚ºè¼•è²
   # 1  éŸ³ç¯€ä¿®æ­£åˆä½µ
    - erase/\<xx\>/
    - xform/\<m([1-5])\>/mu$1/        # é¼»éŸ³mï¼ˆå‘£ï¼‰è½‰åŒ–çˆ²mu
    - xform/\<r5\>/er5/               # r5ï¼ˆå…’ï¼‰è½‰åŒ–çˆ²er5
    - xform/\<eh([1-5])\>/e$1/        # æ¨¡ç³ŠéŸ³ï¼šehï¼ˆèª’æ¬¸ï¼‰ã€eåˆä½µ
   # 2  æ‹¼éŸ³å®Œæ•´å½¢å¼
    - xform/\<([jqxy])u/$1v/
   # 3  ç•°æ‹¼
    # - derive/([jx])v([1-5])\>/$1u$2/
    - erase/[bpm]?i?ong[1-5]\>/
    - erase/f(e|ong|iao|u[a-z]+)[1-5]\>/
    - erase/[dt](o|i[ao]ng|va?n|ve?)[1-5]\>|[nl](ui|iong)[1-5]\>|[gkh]o[1-5]\>/
   # 4  å°–éŸ³è™•ç†
    - xform/\<zii([1-5])\>/gi$1/
    - xform/\<z(?!ve)(v[a-z]*|iong)([1-5])\>/b$1$2/
    # - derive/\<z(ve[1-5])\>/b$1/
    - xform/\<cii([1-5])\>/ki$1/
    - xform/\<c(?!ve)(v[a-z]*|iong)([1-5])\>/p$1$2/
    # - derive/\<c(ve[1-5])\>/p$1/
    - xform/\<sii([1-5])\>/hi$1/
    - xform/\<s(?!ve)(v[a-z]*|iong)([1-5])\>/m$1$2/
    # - derive/\<s(ve[1-5])\>/m$1/
   # 5  éŸ³ç¯€åˆä½µ
    - xform/\<er([1-5])\>/fe$1/
    # - derive/\<y([ae])(?!i)/fi$1/
    # - derive/\<you/fiu/
    # - derive/\<yin/yen/
    - xform/\<y([iv]\w*|ong)([1-5])\>/f$1$2/
    - xform/\<y/j/
    - xform/\<w/q/
    - xform/\<([aoe]\w*)/x$1/
    
   # 6  é›™æ‹¼è™•ç†
    - xform/iu([1-5])\>/Q$1/
    - xform/ia(?=[1-5]\>)|(?<=[gkhr])ua(?=[1-5]\>)/W/
    - xform/[uv]an([1-5])\>/R$1/
    - xform/ve([1-5])\>/T$1/
    - xform/ing(?=[1-5]\>)|(?<=[gkhr])uai(?=[1-5]\>)/Y/
    - xform/uo([1-5])\>/O$1/
    - xform/[uv]n([1-5])\>/P$1/
    - xform/i?ong([1-5])\>/S$1/
    - xform/iang(?=[1-5]\>)|(?<=[dtgkhr])uang(?=[1-5]\>)/D/
    - xform/en([1-5])\>/F$1/
    - xform/eng([1-5])\>/G$1/
    - xform/ang([1-5])\>/H$1/
    - xform/(?<!i)an([1-5])\>/J$1/
    - xform/(?<!i)ao([1-5])\>/K$1/
    - xform/ai([1-5])\>/L$1/
    - xform/ei([1-5])\>/Z$1/
    - xform/ie([1-5])\>/X$1/
    - xform/iao([1-5])\>/C$1/
    - xform/ui([1-5])\>/V$1/
    - xform/ou([1-5])\>/B$1/
    - xform/in([1-5])\>/N$1/
    - xform/ian([1-5])\>/M$1/
    - xform/\<zh/V/
    - xform/\<ch/I/
    - xform/\<sh/U/
    
    - erase/\<([A-Za-z]|[A-Za-z]{3,})([1-5])\>/
    - xlit/QWERTYUIOPASDFGHJKLZXCVBNM/qwertyuiopasdfghjklzxcvbnm/
    - erase/\<[oeway]\w*/
    
   # 7  ç°¡æ‹¼
    # - derive/\<([a-z])([a-z])([1-5])\>/$1$2/                  # ç„¡è²èª¿
    # - abbrev/\<([a-z])([a-z])([1-5])\>/$1/                    # è²æ¯
    # - abbrev/\<([a-z])([a-z])([1-5])\>/$1$3/                  # è²æ¯+è²èª¿
    # - abbrev/\<([a-z])([a-z])([1-5])\>/$1$3$2/                # è²æ¯+è²èª¿+éŸ»æ¯
    
   # 8  è®Šå½¢
    - xlit/12345/oeway/

stroke_lookup:       # ç­†ç•«åæŸ¥
  tag: stroke_lookup
  dictionary: stroke
  enable_completion: true
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  prefix: "~"
  suffix: "'"
  tips: ã€”ç¬”ç”»åæŸ¥ã€•
  preedit_format:  #  åæŸ¥æ–¹æ¡ˆè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šäº”ç­†ç•«å½¢å¼
    - xlit/hspnz/ä¸€ä¸¨ä¸¿ä¸¶ãƒ•/
  comment_format: *reverse_lookup_comment  # æœ¬æ–¹æ¡ˆè©å…¸ç·¨ç¢¼->æç¤ºç¢¼ï¼šæœ¬æ–¹æ¡ˆè¼¸å…¥ç¢¼

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  bindings:
    - { accept: "Control+q", when: always, send: "" }  # ä¿ç•™ç»™ Lua å¤„ç†å™¨ä½¿ç”¨
    - { accept: "Control+l", when: always, send: "" }  # ä¿ç•™ç»™ Lua å¤„ç†å™¨ä½¿ç”¨
    - { accept: "Control+m", when: always, send: "" }  # ä¿ç•™ç»™ Lua å¤„ç†å™¨ä½¿ç”¨
  
    - { accept: Return, send: "Shift+Return", when: composing }
    - { accept: "Shift+Return", send: Return, when: composing }
    
    - { accept: minus, send: minus, when: has_menu }
    - { accept: minus, send: Page_Up, when: paging }
    # - { accept: minus, send: Page_Up, when: has_menu }
    # - { accept: equal, send: Page_Down, when: has_menu }
    
    - { accept: comma, send: comma, when: paging }
    # - { accept: comma, send: Page_Up, when: paging }
    - { accept: period, send: period, when: has_menu }
    # - { accept: period, send: Page_Down, when: has_menu }
    
    # - { accept: semicolon, send: 2, when: has_menu }
    # - { accept: apostrophe, send: 3, when: has_menu }
    
    - {accept: "Control+Shift+5", toggle: ascii_punct, when: always}
    - {accept: "Control+Shift+percent", toggle: ascii_punct, when: always}
    
    - {accept: "Control+Shift+F", toggle: simplification, when: always}

recognizer:
  import_preset: default
  patterns:
    email: "^[A-Za-z][-_.0-9A-Za-z]*@.*$"
    uppercase: "[A-Z][-_+.'0-9A-Za-z]*$"
    url: "^(www[.]|https?:|ftp[.:]|mailto:|file:).*$|^[a-z]+[.].+$"
    punct: '^/([0-9]0?|[A-Za-z]+)$'
    luna_pinyin_lookup: "`[a-z]*'?$"
    stroke_lookup: "~[a-z]*'?$"

__patch:             # ç°¡é«”è©åº«è½‰æ›ç‚ºç¹é«”
  switches/@after 1: {name: op_n, reset: 1}            # æ·»åŠ ç°¡è½‰ç¹é–‹é—œä¸¦é–å®šç°¡è½‰ç¹ç‹€æ…‹ï¼Œæ³¨æ„ä¸å¯«statesï¼ˆä¸åœ¨é–‹é—œèœå–®ä¸­é¡¯ç¤ºï¼‰
  engine/filters/@before 0: simplifier@sc_tc           # å…ˆåŠ è¼‰ç°¡è½‰ç¹éæ¿¾å™¨
  sc_tc: {option_name: op_n, opencc_config: s2t.json}  # s2t é€šç”¨ç¹é«”/s2hk é¦™æ¸¯ç¹é«”/s2tw å°ç£ç¹é«”

__patch:             # ä½¿ç”¨èªè¨€æ¨¡å‹
  - grammar:/triple_pinyin_hant?
